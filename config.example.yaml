# VPN Rotator Configuration Example
# This file demonstrates the simplified configuration structure
# Taking full advantage of Viper's features including environment variable support
# Hetzner Cloud Provider Settings (REQUIRED)
hetzner:
  # API token for Hetzner Cloud (REQUIRED)
  # Can also be set via: VPN_ROTATOR_HETZNER_API_TOKEN or HETZNER_API_TOKEN env var
  api_token: "your-hetzner-api-token-here"
  
  # Path to SSH private key for server access (REQUIRED)
  # Can also be set via: VPN_ROTATOR_HETZNER_SSH_PRIVATE_KEY_PATH env var
  ssh_private_key_path: "/path/to/your/ssh/private/key"
  
  # SSH key name in Hetzner Cloud (optional)
  # Can also be set via: VPN_ROTATOR_HETZNER_SSH_KEY env var
  ssh_key: "vpn-rotator-key"
  
  # Server types to use (optional, default: ["cx11"])
  # Can also be set via: VPN_ROTATOR_HETZNER_SERVER_TYPES env var (comma-separated)
  server_types:
    - "cx11"
    - "cx21"
  
  # Datacenter locations (optional, default: ["nbg1"])
  # Can also be set via: VPN_ROTATOR_HETZNER_LOCATIONS env var (comma-separated)
  locations:
    - "nbg1"
    - "fsn1"
    - "hel1"
  
  # Server image (optional, default: "ubuntu-22.04")
  # Can also be set via: VPN_ROTATOR_HETZNER_IMAGE env var
  image: "ubuntu-22.04"

# VPN Rotation Behavior (ESSENTIAL)
rotation:
  # How often to rotate VPN nodes (default: 24h)
  # Can also be set via: VPN_ROTATOR_ROTATION_INTERVAL env var
  # Examples: "30m", "1h", "6h", "24h", "48h"
  interval: "24h"
  
  # How long to keep old nodes before cleanup (default: 2h)
  # Can also be set via: VPN_ROTATOR_ROTATION_CLEANUP_AGE env var
  # Should be longer than provisioning time
  cleanup_age: "2h"

# Peer Connection Limits (IMPORTANT)
peers:
  # Maximum peers per VPN node (default: 50)
  # Can also be set via: VPN_ROTATOR_PEERS_MAX_PER_NODE env var
  max_per_node: 50
  
  # Capacity warning threshold 0-100% (default: 80.0)
  # Can also be set via: VPN_ROTATOR_PEERS_CAPACITY_THRESHOLD env var
  capacity_threshold: 80.0

# Logging Configuration (BASIC)
log:
  # Log level: debug, info, warn, error (default: info)
  # Can also be set via: VPN_ROTATOR_LOG_LEVEL env var
  level: "info"
  
  # Log format: json, text (default: json)
  # Can also be set via: VPN_ROTATOR_LOG_FORMAT env var
  format: "json"


# API Server Settings
api:
  # API server listen address (default: ":8080")
  # Can also be set via: VPN_ROTATOR_API_LISTEN_ADDR env var
  listen_addr: ":8080"

# Database Settings
database:
  # SQLite database file path (default: "./data/rotator.db")
  # Can also be set via: VPN_ROTATOR_DATABASE_PATH or DATABASE_PATH env var
  path: "./data/rotator.db"

# Service-Level Settings
service:
  # Graceful shutdown timeout (default: 30s)
  # Can also be set via: VPN_ROTATOR_SERVICE_SHUTDOWN_TIMEOUT env var
  shutdown_timeout: "30s"
